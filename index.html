<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" >
    </head>
    <body>
        <div id="app">
            <div class="wrapper container col-md-12">
                <br/>
                <div class="row">
                    <div class="col-md-3 border-right">
                        <div class="wrapper container col-md-12">
                            <div class="row mb-3 ">
                                <div class="col-md-12 text-center">
                                    <h3>Mediations</h3>
                                </div>
                            </div>
                            <div class="row text-center" v-for="baseNode in integrationData.baseNodes">
                                <div class="col-md-12 mb-1 text-center" v-if="baseNode.type === 'Mediation'">
                                    <button type="button" v-on:click="selectBaseNode(baseNode)" class="btn btn-secondary" v-bind:class="{ 'btn-success' : selectedBaseNode && selectedBaseNode.id === baseNode.id }" >
                                      {{ baseNode.name }}
                                    </button>                    
                                </div>            
                            </div>
                            <br/>
                            <div class="row mb-3 ">
                                <div class="col-md-12 text-center">
                                    <h3>Topics</h3>
                                </div>
                            </div>
                            <div class="row text-center" v-for="baseNode in integrationData.baseNodes">
                                <div class="col-md-12 mb-1 text-center" v-if="baseNode.type === 'Topic'">
                                    <button type="button" v-on:click="selectBaseNode(baseNode)" class="btn btn-secondary" v-bind:class="{ 'btn-success' : selectedBaseNode && selectedBaseNode.id === baseNode.id }" >
                                      {{ baseNode.name }}
                                    </button>                    
                                </div>            
                            </div>
                            <br/>
                            <div class="row mb-3 ">
                                <div class="col-md-12 text-center">
                                    <h3>Applications</h3>
                                </div>
                            </div>
                            <div class="row text-center" v-for="baseNode in integrationData.baseNodes">
                                <div class="col-md-12 mb-1 text-center" v-if="baseNode.type === 'Application'">
                                    <button type="button" v-on:click="selectBaseNode(baseNode)" class="btn btn-secondary" v-bind:class="{ 'btn-success' : selectedBaseNode && selectedBaseNode.id === baseNode.id }" >
                                      {{ baseNode.name }}
                                    </button>                    
                                </div>            
                            </div>
                        </div>
                        
                    </div>
                    <div class="col-md-9">
                        <div v-if=selectedBaseNode class="wrapper container col-md-12">
                            <div class="row">
                                <div class="col-md-12 text-center">
                                    <h3>{{ selectedBaseNode.type }}: {{ selectedBaseNode.name }}</h3>
                                </div>
                            </div>
                        
                            <ul class="nav nav-tabs" >
                                <li class="nav-item">
                                    <a class="nav-link" v-bind:class="{ 'active' : !selectedNode }" href="#" v-on:click="selectNode(false)">General info</a>
                                </li>
                                <li class="nav-item" v-for="node in selectedBaseNode.nodes">
                                    <a class="nav-link" v-bind:class="{ 'active' : selectedNode && selectedNode.id === node.id }" href="#" v-on:click="selectNode(node)">{{ node.environment.name }}</a>
                                </li>
                            </ul>
                            <div v-if="!selectedNode" class="row">
                                <div class="col-md-12" >
                                    <div class="row">
                                        <div class="col-md-12">
                                            <br/>
                                            <h5>General info</h5>
                                        </div>
                                    </div>
                                    <div class="row border-bottom">
                                        <div class="col-md-12">
                                            <form>
                                                <br/>
                                                <div class="form-group">
                                                    <label for="inputType">Type</label>
                                                    <input type="text" class="form-control" id="inputType" placeholder="Enter type" :value=selectedBaseNode.type>
                                                </div>
                                                <div v-if="selectedBaseNode.type == 'Mediation'" class="form-group">
                                                    <label for="inputIraType">IRA Type</label>
                                                    <input type="text" class="form-control" id="inputIraType" placeholder="Enter IRA type" :value=selectedBaseNode.iraType>
                                                </div>
                                                <div v-if="selectedBaseNode.type == 'Topic'" class="form-group">
                                                    <label for="inputSubtype">Subtype</label>
                                                    <input type="text" class="form-control" id="inputSubtype" placeholder="Enter subtype" :value=selectedBaseNode.subtype>
                                                </div>
                                                <div v-if="selectedBaseNode.type == 'Application'" class="form-group">
                                                    <label for="inputDomain">Domain</label>
                                                    <input type="text" class="form-control" id="inputDomain" placeholder="Enter domain" :value=selectedBaseNode.domain>
                                                </div>
                                                <div class="form-group">
                                                    <label for="inputName">Name</label>
                                                    <input type="text" class="form-control" id="inputName" placeholder="Enter name" :value=selectedBaseNode.name>
                                                </div>
                                                <button type="submit" class="btn btn-primary">Update</button>
                                            </form>
                                        </div>            
                                    </div>
                                    
                                </div>            
                            </div>
                                    
                            <div v-if="selectedNode" class="row">
                                <div class="col-md-12" >
                                    <div class="row">
                                        <div class="col-md-12">
                                            <br/>
                                            <h5>Environment specific</h5>
                                        </div>
                                    </div>
                                    <ul class="nav nav-tabs" >
                                    </ul>
                                    <div class="row border-bottom" v-if=selectedNode>
                                        <div class="col-md-12">
                                            <form>
                                                <br/>
                                                <div v-if="selectedBaseNode.type == 'Mediation' || selectedBaseNode.type == 'Topic'" class="form-group">
                                                    <label for="inputMajorVersion">Major version</label>
                                                    <input type="text" class="form-control" id="inputMajorVersion" placeholder="Enter major version" :value=selectedNode.majorVersion>
                                                </div>
                                                <div v-if="selectedBaseNode.type == 'Mediation' || selectedBaseNode.type == 'Topic'" class="form-group">
                                                    <label for="inputDocumentVersion">Document version</label>
                                                    <input type="text" class="form-control" id="inputDocumentVersion" placeholder="Enter document version" :value=selectedNode.documentVersion>
                                                </div>
                                                <div v-if="selectedBaseNode.type == 'Application'" class="form-group">
                                                    <label for="inputVersion">Version</label>
                                                    <input type="text" class="form-control" id="inputVersion" placeholder="Enter version" :value=selectedNode.version>
                                                </div>
                                                <button type="submit" class="btn btn-primary">Update</button>
                                            </form>
                                        </div>            
                                    </div>            
                                    <div class="row" v-if=selectedNode>
                                        <br/>
                                        <div class="col-md-4 border-right">
                                            <br/>
                                            <h5>Inputs</h5>
                                            <br/>
                                            <div class="row mb-1" v-for="inputLink in selectedNode.inputLinks">
                                                <div class="col-md-11">
                                                    <button type="button" class="btn btn-secondary float-right" v-on:click="selectNodeByInputLink(inputLink)" >
                                                        {{ integrationData.nodesById[inputLink.fromNodeId].baseData.name }}
                                                    </button>                    
                                                </div>
                                                <div class="col-md-1" data-toggle="tooltip" data-placement="top" :title=inputLink.dataType.baseData.name >
                                                    <span class="fa fa-arrow-right" style="margin-top: 10px;"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-center">
                                            <br/>
                                            <h5>{{ selectedNode.baseData.type }}</h5>
                                            <br/>
                                            <button type="button" class="btn btn-success" >
                                                {{ selectedNode.baseData.name }}
                                            </button>                    
                                        </div>
                                        <div class="col-md-4 border-left">
                                            <br/>
                                            <h5>Outputs</h5>
                                            <br/>
                                            <div class="row mb-1" v-for="outputLink in selectedNode.outputLinks">
                                            
                                                <div class="col-md-1" data-toggle="tooltip" data-placement="top" :title=outputLink.dataType.baseData.name >
                                                    <span class="fa fa-arrow-right" style="margin-top: 10px;"></span>
                                                </div>
                                                <div class="col-md-11">
                                                    <button type="button" class="btn btn-secondary float-left" v-on:click="selectNodeByOutputLink(outputLink)" >
                                                        {{ integrationData.nodesById[outputLink.toNodeId].baseData.name }}
                                                    </button>                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row border-bottom" v-if=selectedNode>
                                        <br/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <br/>
                        
                        <div class="wrapper container col-md-12">
                            <canvas v-on:click="toggleZoom()" id="canvas" width="1200" height="800"></canvas>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        
        <!-- Vue.js -->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <!-- production: <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
        
        <!-- VisualView js -->
        <script src="js/shapes.js"></script>
        <script src="js/geometry.js"></script>
        <script src="js/draw.js"></script>
        <script src="js/input.js"></script>
        <script src="js/interaction.js"></script>
        <script src="js/container.js"></script>
        <script src="js/menu.js"></script>
        
        <!-- Our own js -->
        <script src="js/vue.js"></script>
    </body>
</html>